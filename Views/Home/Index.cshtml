
@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"]</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: white;
            background-image: url('https://images.unsplash.com/photo-1719859063183-b809c92846b4?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');
            background-size: cover;
        }

        .calculator {
            background-color: rgba(255, 255, 255, 0.1); /* Beyaz arka planı yarı saydam yap */
            backdrop-filter: blur(10px); /* Arkadaki içeriği bulanıklaştır */
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
            padding: 20px;
            width: 300px;
        }


        .display {
            background-color: #e9e9e9;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-bottom: 10px;
            padding: 10px;
            text-align: right;
            font-size: 24px;
        }

        .buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        button {
            background-color: #f8f8f8;
            border: 1px solid #ccc;
            border-radius: 4px;
            cursor: pointer;
            font-size: 18px;
            padding: 10px;
            transition: background-color 0.3s;
        }

            button:hover {
                background-color: #e0e0e0;
            }

        .operation {
            background-color:blueviolet;
            color: white;
        }

            .operation:hover {
                background-color: #cc2565;
            }

        #calculate {
            background-color: #ac50;
            color: white;
            grid-column: span 4;
        }

            #calculate:hover {
                background-color: #45a049;
            }
    </style>
</head>
<body>

    
        <div class="calculator">
            <h1 style="text-align:center; color:white;">Calculator</h1>
            <div class="display" id="display">0</div>
            <div class="buttons">
                <button onclick="appendToDisplay('7')">7</button>
                <button onclick="appendToDisplay('8')">8</button>
                <button onclick="appendToDisplay('9')">9</button>
                <button class="operation" onclick="setOperation('Division')">/</button>
                <button onclick="appendToDisplay('4')">4</button>
                <button onclick="appendToDisplay('5')">5</button>
                <button onclick="appendToDisplay('6')">6</button>
                <button class="operation" onclick="setOperation('Multiplation')">*</button>
                <button onclick="appendToDisplay('1')">1</button>
                <button onclick="appendToDisplay('2')">2</button>
                <button onclick="appendToDisplay('3')">3</button>
                <button class="operation" onclick="setOperation('Subtraction')">-</button>
                <button onclick="appendToDisplay('0')">0</button>
                <button onclick="appendToDisplay('.')">.</button>
                <button onclick="clearDisplay()">C</button>
                <button class="operation" onclick="setOperation('Addition')">+</button>
                <button id="calculate" onclick="calculate()">=</button>
            </div>
        </div>


    

    <script>
        let currentOperation = '';
        let firstNumber = '';
        let secondNumber = '';
        let count = 0;
        

        function appendToDisplay(value) {
            console.log(value);
            const display = document.getElementById('display');
            if (display.innerText === '0' || display.innerText === 'Error') {
                display.innerText = value;
            } else {
                display.innerText += value;
            }
            // currentOperation doluysa, kullanıcı ikinci sayıyı giriyor demektir.
            if (currentOperation) {
                if (count === 0) {
                    count++;
                }
                else {
                    secondNumber += value;
                    console.log(secondNumber)

                }
            } else {
                firstNumber += value;
            }
        }

        function setOperation(operation) {

            if (count === 0) {

               currentOperation = operation;
               appendToDisplay(' ' + getOperationSymbol(operation) + '  ');

            }

            else{
                currentOperation = operation;
                calculate();
                console.log(operation);
                
            }
            
        }

        function getOperationSymbol(operation) {
            switch (operation) {
                case 'Addition': return '+';
                case 'Subtraction': return '-';
                case 'Multiplation': return '*';
                case 'Division': return '/';
                default: return '';
            }
        }

        function clearDisplay() {
            document.getElementById('display').innerText = '0';
            currentOperation = '';
            firstNumber = '';
            secondNumber = '';
        }

        function calculate() {
            if (firstNumber && secondNumber && currentOperation) {
                fetch(`/Home/Calculate/${currentOperation}/${firstNumber}/${secondNumber}`)
                    .then(response => response.json())
                    .then(data => {
                        document.getElementById('display').innerText = data.result;
                        firstNumber = data.result.toString();
                        secondNumber = '';
                        currentOperation = '';
                        count = 0;
                    })
                    .catch(error => {
                        document.getElementById('display').innerText = 'Error';
                        console.error('Error:', error);
                        count = 0;
                    });
            }
        }
    </script>
</body>
</html>
